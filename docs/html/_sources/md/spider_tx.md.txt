# Tx Spider

The transaction spider named `Tx Spider` starts from one or more source addresses and outputs a series of subgraphs.
`Tx Spider` supports eth/bsc/polygon/heco until now:

- `txs.btc`: `btc` transaction spider.
- `txs.eth`: `eth` transaction spider.
- `txs.bsc`: `bsc` transaction spider.
- `txs.polygon`: `polygon` transaction spider.
- `txs.heco`: `heco` transaction spider.

This section will introduce more configurations about Tx Spider through `txs.eth` as example.

## Crawling arguments

When starting tx Spider, the following arguments can be set, including:

- **source**: a source address which cannot exist with `file` argument.
- **file**: the source address `csv` file, which cannot exist with `source` argument.
- **out**: the output directory
- **fields**: the output fields joined by `,` for each transaction, default
  is `hash,from,to,value,timeStamp,blockNumber`
- **types**: the transaction types joined by `,` that spider crawled, default is `external`, and the options
  including: `external`, `internal`, `erc20`, `erc721`. (This argument is only used in `txs.eth`, `txs.bsc`,
  `txs.polygon` and `txs.heco`)

Note that in Bitcoin spiders `txs.btc`, the source address must be transaction hash. 
This is because the data structure of Bitcoin is UTXO, while for Ethereum-like spiders, the source address can be the address hash.
For example, you can start a BFS tx spider for crawling the transactions on Ethereum just like this:

```shell
scrapy crawl txs.eth.bfs \
-a file=./sources.csv \
-a out=./data/bfs \
-a fields=hash,from,to,value,timeStamp,blockNumber,isError,input \
-a types=external,internal
```

Well, the input file `./source.csv` is formatted as follows:

```
...
0x068ac6ed5efc38a6266261b4486a8907fd7ea15f
0xd4e79226f1e5a7a28abb58f4704e53cd364e8d11
0xf4a2eff88a408ff4c4550148151c33c93442619e
...
```

## BFS tx spider

In addition to the common arguments, the arguments for BFS tx spider including:

- depth: the BFS search depth, default is 2

For example:

```shell
scrapy crawl txs.eth.bfs \
-a file=./sources.csv \
-a out=./data/bfs \
-a fields=hash,from,to,value,timeStamp,blockNumber,isError,input \
-a types=external,internal
-a depth=3
```

## Poison tx Spider

In addition to the common arguments, the arguments for Poison tx spider including:

- depth: the Poison search depth, default is 2

For example:

```shell
scrapy crawl txs.eth.posion \
-a file=./sources.csv \
-a out=./data/posion \
-a fields=hash,from,to,value,timeStamp,blockNumber,isError,input \
-a types=external,internal
-a depth=3
```

## Haircut tx Spider

In addition to the common arguments, the arguments for Haircut tx spider including:

- min_weight: the minimum weight for Haircut strategy, default is 0.001

For example:

```shell
scrapy crawl txs.eth.haircut \
-a file=./sources.csv \
-a out=./data/haircut \
-a fields=hash,from,to,value,timeStamp,blockNumber,isError,input \
-a types=external,internal
-a min_weight=1e-5
```

**Attention**: `types` for this spider only can be selected from `external` and `internal`.

## APPR tx Spider

In addition to the common arguments, the arguments for APPR tx spider including:

- alpha: the alpha for APPR strategy, default is 0.15
- epsilon: the epsilon for APPR strategy, default is 0.001

For example:

```shell
scrapy crawl txs.eth.appr \
-a file=./sources.csv \
-a out=./data/appr \
-a fields=hash,from,to,value,timeStamp,blockNumber,isError,input \
-a types=external,internal
-a alpha=0.1
-a epsilon=1e-5
```

**Attention**: `types` for this spider only can be selected from `external` and `internal`.

## TTR tx Spider

In addition to the common arguments, the arguments for TTR tx spider including:

- alpha: the alpha for TTR strategy, default is 0.15
- beta: the beta for TTR strategy, default is 0.7
- epsilon: the epsilon for TTR strategy, default is 0.0001

For example:

```shell
scrapy crawl txs.eth.appr \
-a file=./sources.csv \
-a out=./data/appr \
-a fields=hash,from,to,value,timeStamp,blockNumber,isError,input \
-a types=external,internal
-a alpha=0.1
-a beta=0.6
-a epsilon=1e-5
```

**Attention**: `types` for this spider only can be selected from `external` and `internal`.